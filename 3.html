<canvas  id="myCanvas" width="800" height="600"></canvas>

<style onload="

function imgChange(imagePath) {
            var c=document.getElementById('myCanvas');
            var ctx=c.getContext('2d');
            var img=new Image();
            img.onload = function(){
                  ctx.drawImage(img,0,0);
            };
            img.src=imagePath;
}

let img = new Image();
img.src = './1.png';
img.onload = function() {
  window.requestAnimationFrame(gameLoop);
};

let canvas = document.querySelector('canvas');
let ctx = canvas.getContext('2d');



const SCALE = 2;
const WIDTH = 16;
const HEIGHT = 18;
const SCALED_WIDTH = SCALE * WIDTH;
const SCALED_HEIGHT = SCALE * HEIGHT;

function drawFrame(frameX, frameY, canvasX, canvasY) {
  ctx.drawImage(img,
                frameX * WIDTH, frameY * HEIGHT, WIDTH, HEIGHT,
                canvasX, canvasY, SCALED_WIDTH, SCALED_HEIGHT);
}

const CYCLE_LOOP = [0, 1, 0, 2];
let currentLoopIndex = 0;
let frameCount = 0;
let currentDirection = 0;
let keyPresses = {};


window.addEventListener('keydown', keyDownListener);
function keyDownListener(event) {         
    keyPresses[event.key] = true;
    if (event.which == 32){
            img.onload = function(){
                  ctx.drawImage(img,0,0);
            };
            img.src='./4.png';
            console.log(positionX)
            if(positionX>=310&&positionX<=340){alert('흐음')}
        }
}

window.addEventListener('keyup', keyUpListener);
function keyUpListener(event) {
    keyPresses[event.key] = false;
            img.onload = function(){
                  ctx.drawImage(img,0,0);
            };
            img.src='./1.png';
}

const MOVEMENT_SPEED = 1;
positionX = 0;
positionY = 455;

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  if (keyPresses.ArrowLeft) {
    positionX -= MOVEMENT_SPEED;
            img.onload = function(){
                  ctx.drawImage(img,0,0);
            };
            img.src='./2.png';
  } else if (keyPresses.ArrowRight) {
    positionX += MOVEMENT_SPEED;
            img.onload = function(){
                  ctx.drawImage(img,0,0);
            };
            img.src='./3.png';
  }
  drawFrame(0, 0, positionX, positionY);
  window.requestAnimationFrame(gameLoop);
}

document.body.onkeyup = function(e){
    if(e.keyCode == 32){
        img.onload = function(){
                  ctx.drawImage(img,0,0);
            };
            img.src='./2.png';
    }
}

">
canvas {
    background-image: url('./배경.png');
  border: 1px solid black;
}

body{overflow-x: hidden}
</style>